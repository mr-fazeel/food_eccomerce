<% layout('/layouts/boilerplate') -%>

<!-- order.ejs -->
<div class="container my-4">
  <h2 class="mb-4">Your Orders</h2>
  <p class="text-muted mb-3"><small><i class="fas fa-sync-alt"></i> Reload this page for latest update</small></p>

  <!-- If there are no orders, show a simple message -->
  <% if (!orders || orders.length === 0) { %>
    <p>No orders found.</p>
  <% } else { %>
    <% orders.forEach(order => { %>
      <!-- Single Order Card -->
      <div class="card mb-3" style="border: 2px solid #FFA07A;">
        <div class="card-body d-flex justify-content-between align-items-center">
          
          <!-- Left: Package Icon + Item(s) -->
          <div class="d-flex align-items-start">
            <!-- Font Awesome icon -->
            <i class="fas fa-box-open fa-2x me-3 text-warning"></i>
            
            <!-- Items List -->
            <div>
              <% order.items.forEach(item => { %>
                <p class="mb-1 fw-semibold">
                  <%= item.name %> x <%= item.quantity %>
                </p>
              <% }) %>
            </div>
          </div>
          
          <!-- Middle: Price + Items Count -->
          <div>
            <p class="mb-1 fw-bold">
              $<%= order.totalAmount %>
            </p>
            <p class="mb-1">
              Items: <%= order.items.reduce((acc, i) => acc + i.quantity, 0) %>
            </p>
          </div>
          
          <!-- Right: Order Status (e.g. "FOOD PROCESSING") -->
          <div>
            <!-- We assume 'order.status' might be 'FOOD PROCESSING', 'Being Cooked', etc. -->
            <span class="badge bg-success text-uppercase">
              <%= order.status %>
            </span>
          </div>
        </div>
      </div>
    <% }) %>
  <% } %>
</div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>